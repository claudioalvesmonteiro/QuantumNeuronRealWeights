from encodingsource import InitializerUniformlyRotation
from sf import sfGenerator
from hsgs import hsgsGenerator
import numpy as np
import math
import random
from qiskit import execute, Aer, QuantumRegister, QuantumCircuit, ClassicalRegister
from sympy.combinatorics.graycode import GrayCode
from qiskit.aqua.utils.controlled_circuit import apply_cu3
from extrafunctions import *
from neuron import *
np.random.seed(7)

lr = 0.001
threshold = 0.08
simulator = Aer.get_backend('qasm_simulator')

def compareDiff (inputV, weights):
    encodingcircuit = createNeuron(inputV, weights, 'encoding')     
    encodingResult = executeNeuron(encodingcircuit, simulator, threshold)

    classicalResult = np.sum(np.multiply(inputV, weights)) ** 2
    return(round(encodingResult, 3), round(classicalResult, 3), round(np.sqrt((classicalResult-encodingResult) ** 2), 3))


(inputV, weights) = ([-1, 1, -1, -1, -1, -1, 1, -1, -1, -1, 1, 1, -1, 1, 1, -1, 1, -1, 1, -1, -1, 1, 1, -1, -1, -1, -1, 1, -1, -1, -1, -1, 1, -1, 1, 1, -1, -1, -1, 1, -1, -1, -1, 1, -1, 1, 1, -1, -1, 1, 1, 1, 1, -1, 1, 1, 1, 1, 1, 1, 1, -1, 1, -1] , [0.09510710252616798, -0.20667386935859453, -0.134254217647793, -0.19579684096976815, -0.1922239644750249, -0.0954624089786998, 0.12190847470460561, -0.11503112699298995, -0.05122844417954899, 0.09910945347004507, 0.015477856559181083, 0.05702588939454921, -0.18386606851895756, 0.16639467418646464, 0.17739815739638037, 0.15699536708063724, -0.05064628091913489, 0.08593325181285912, 0.19646809889513867, 0.19558303414676642, 0.10337110064036617, -0.12364937943252974, 0.09617826777493113, -0.13090934303419774, -0.11183624673406176, 0.10981711172590565, -0.14062442210596698, 0.08634153743207398, 0.04854431175623499, -0.12702675023876442, -0.15708798863876794, -0.04895723346235205, 0.11852761869144464, -0.05720408690939465, -0.16223731072239317, -0.01627327052798916, -0.12422797264009411, 0.14784262662485756, -0.11297588735166235, 0.03615935468201018, -0.08480571544211322, -0.010308507853244534, 0.026730286272829494, 0.09721906317170757, 0.06858339852421459, -0.17556968889863264, -0.11347140892333116, -0.19843118547470354, -0.11940097244651078, -0.1903394813885171, -0.18981496558454206, 0.18552868055386174, 0.05688780153684019, 0.10229114683433214, 0.160678198558264, -0.010374808857055497, 0.10680592133141505, -0.08732025918674019, 0.20442178034712574, 0.04208569738531337, 0.12981322670841708, 0.035286125649321015, -0.07568774760832492, 0.012491138721607616])

print(compareDiff(inputV, weights))




